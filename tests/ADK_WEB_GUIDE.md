# Google ADK Web UI ν…μ¤νΈ κ°€μ΄λ“

Google ADKμ μ›Ή UIλ¥Ό μ‚¬μ©ν•μ—¬ Black-Litterman MCP Serverλ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ…λ‹λ‹¤.

## π€ λΉ λ¥Έ μ‹μ‘

### 1. MCP μ„λ²„ μ‹μ‘ (Terminal 1)

```bash
uv run python start_http.py
```

**μ¶λ ¥ μμ‹**:
```
============================================================
Black-Litterman MCP Server - HTTP Mode
============================================================

π€ Server starting at: http://localhost:5000/mcp

π“ To test with ADK Web UI:
   1. Keep this terminal running
   2. Open new terminal and run: adk web
   3. Open browser: http://localhost:8000

============================================================
```

### 2. ADK μ›Ή UI μ‹μ‘ (Terminal 2)

```bash
adk web
```

**μ¶λ ¥ μμ‹**:
```
INFO:     Started server process [12345]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

### 3. λΈλΌμ°μ € μ ‘μ†

```
http://localhost:8000
```

---

## π’¬ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: κΈ°λ³Έ ν¬νΈν΄λ¦¬μ¤ μµμ ν™” (κ²¬ν•΄ μ—†μ)

**μ…λ ¥**:
```
AAPL, MSFT, GOOGLλ΅ ν¬νΈν΄λ¦¬μ¤λ¥Ό μµμ ν™”ν•΄μ¤.
2023λ…„ 1μ›” 1μΌλ¶€ν„° λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•΄.
```

**μμƒ κ²°κ³Ό**:
- 3κ° μμ‚°μ— λ€ν• κ· λ“± λ°°λ¶„ (μ‹μ¥ κ· ν•)
- κ° μμ‚° μ•½ 33.33%
- κΈ°λ€ μμµλ¥ , λ³€λ™μ„±, μƒ¤ν”„ λΉ„μ¨ μ μ‹

---

### μ‹λ‚λ¦¬μ¤ 2: ν¬μμ κ²¬ν•΄ λ°μ (λ‹¨μΌ κ²¬ν•΄)

**μ…λ ¥**:
```
AAPL, MSFT, GOOGLλ΅ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ§λ“¤μ–΄μ¤.
2023λ…„λ¶€ν„° λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•κ³ ,
AAPLμ΄ 10% μμµμ„ λ‚Ό κ²ƒμΌλ΅ μμƒν•΄. ν™•μ‹ λ„λ” 70%μ•Ό.
```

**μμƒ κ²°κ³Ό**:
- AAPL λΉ„μ¤‘μ΄ κ²¬ν•΄μ— λ”°λΌ μ΅°μ •λ¨
- AAPL prior vs posterior returns λΉ„κµ
- κ²¬ν•΄κ°€ ν¬νΈν΄λ¦¬μ¤μ— λ―ΈμΉ μν–¥ μ„¤λ…

---

### μ‹λ‚λ¦¬μ¤ 3: λ‹¤μ¤‘ κ²¬ν•΄ λ°μ

**μ…λ ¥**:
```
5κ° μμ‚°(AAPL, MSFT, GOOGL, AMZN, TSLA)μΌλ΅ ν¬νΈν΄λ¦¬μ¤λ¥Ό κµ¬μ„±ν•΄μ¤.
2023λ…„ 1μ›”λ¶€ν„° λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•κ³ ,
AAPLμ€ 15% μμµ, TSLAλ” -5% μμµμ„ μμƒν•΄. ν™•μ‹ λ„λ” κ°κ° 80%, 60%μ•Ό.
```

**μ°Έκ³ **: μ—¬λ¬ κ²¬ν•΄λ” ν„μ¬ κµ¬ν„μ—μ„ λ™μΌν• confidenceλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

---

### μ‹λ‚λ¦¬μ¤ 4: κ°λ³„ λ„κµ¬ νΈμ¶

#### κΈ°λ€ μμµλ¥  κ³„μ‚°

**μ…λ ¥**:
```
AAPL, MSFT, GOOGLμ 2023λ…„λ¶€ν„° κΈ°λ€ μμµλ¥ μ„ κ³„μ‚°ν•΄μ¤.
```

#### κ³µλ¶„μ‚° ν–‰λ ¬ κ³„μ‚°

**μ…λ ¥**:
```
AAPL, MSFTμ κ³µλ¶„μ‚°μ„ κ³„μ‚°ν•΄μ¤. 2023λ…„λ¶€ν„° λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•΄.
```

---

## π“ κ²°κ³Ό ν•΄μ„

### ν¬νΈν΄λ¦¬μ¤ λΉ„μ¤‘ (Weights)
- κ° μμ‚°μ— ν¬μν•  λΉ„μ¨
- ν•©κ³„λ” 100%
- μ: AAPL 30%, MSFT 35%, GOOGL 35%

### κΈ°λ€ μμµλ¥  (Expected Return)
- μ—°μ¨ν™”λ μμƒ μμµλ¥ 
- μ: 11.38% = μ—°κ°„ 11.38% μμµ μμƒ

### λ³€λ™μ„± (Volatility)
- μ—°μ¨ν™”λ ν‘μ¤€νΈμ°¨
- ν¬νΈν΄λ¦¬μ¤μ λ¦¬μ¤ν¬ μμ¤€
- μ: 21.34% = μ—°κ°„ λ³€λ™μ„±

### μƒ¤ν”„ λΉ„μ¨ (Sharpe Ratio)
- μ„ν— λ€λΉ„ μμµ ν¨μ¨μ„±
- λ†’μ„μλ΅ μΆ‹μ
- μ: 0.53 = μ–‘νΈν• μμ¤€

### Prior vs Posterior Returns
- **Prior**: μ‹μ¥ κ· ν• κΈ°λ° κΈ°λ€ μμµλ¥ 
- **Posterior**: κ²¬ν•΄λ¥Ό λ°μν• μµμΆ… κΈ°λ€ μμµλ¥ 
- μ°¨μ΄κ°€ ν΄μλ΅ κ²¬ν•΄μ μν–¥μ΄ νΌ

---

## π› οΈ λ¬Έμ  ν•΄κ²°

### 1. "Data file not found" μ—λ¬

**μ›μΈ**: Parquet λ°μ΄ν„° νμΌμ΄ μ—†μ

**ν•΄κ²°**:
```bash
# λ°μ΄ν„° λ‹¤μ΄λ΅λ“
uv run python scripts/download_data.py --tickers AAPL MSFT GOOGL
```

### 2. MCP μ„λ²„ μ—°κ²° μ‹¤ν¨

**ν™•μΈ μ‚¬ν•­**:
- Terminal 1μ—μ„ `start_http.py`κ°€ μ‹¤ν–‰ μ¤‘μΈκ°€?
- http://localhost:5000/mcp μ ‘μ† κ°€λ¥ν•κ°€?
- λ°©ν™”λ²½ μ„¤μ • ν™•μΈ

**μ¬μ‹μ‘**:
```bash
# Terminal 1
Ctrl+C  # μ„λ²„ μ¤‘μ§€
uv run python start_http.py  # μ¬μ‹μ‘
```

### 3. ADK μ›Ή UIκ°€ μ‹μ‘λμ§€ μ•μ

**ν™•μΈ**:
```bash
# google-adk μ„¤μΉ ν™•μΈ
uv sync --extra agent

# λλ”
pip install "google-adk[a2a]==1.14.1"
```

### 4. μλ»λ λ‚ μ§ ν•μ‹

**μ¬λ°”λ¥Έ ν•μ‹**: YYYY-MM-DD
- β… "2023-01-01"
- β "2023/01/01"
- β "01-01-2023"

---

## π― κ³ κΈ‰ μ‚¬μ©λ²•

### μ»¤μ¤ν…€ market caps μ‚¬μ©

ν„μ¬λ” κ· λ“± κ°€μ¤‘μΉ(equal weights)λ¥Ό μ‚¬μ©ν•μ§€λ§, market capsλ¥Ό μ κ³µν•μ—¬ μ‹κ°€μ΄μ•΅ κΈ°λ° priorλ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

**ν–¥ν›„ μ§€μ› μμ •**:
```python
market_caps = {
    "AAPL": 3000000000000,  # $3T
    "MSFT": 2800000000000,  # $2.8T
    "GOOGL": 1700000000000  # $1.7T
}
```

### μ„ν— νν”Ό κ³„μ μ΅°μ •

κΈ°λ³Έκ°’μ€ 2.5μ…λ‹λ‹¤. λ” λ³΄μμ μΈ ν¬μμλ” λ” λ†’μ€ κ°’μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

---

## π“ μ°Έκ³  μλ£

### Black-Litterman λ¨λΈ μ΄ν•΄

1. **Prior (Ο€)**: μ‹μ¥ κ· ν• μμµλ¥ 
   - Formula: Ο€ = Ξ΄ Γ— Ξ£ Γ— w_mkt
   - Ξ΄: μ„ν— νν”Ό κ³„μ
   - Ξ£: κ³µλ¶„μ‚° ν–‰λ ¬
   - w_mkt: μ‹μ¥ κ°€μ¤‘μΉ

2. **View (P, Q, Ξ©)**:
   - P: κ²¬ν•΄ λ²΅ν„° (μ–΄λ–¤ μμ‚°μ— λ€ν• κ²¬ν•΄?)
   - Q: μμƒ μμµλ¥  (μ–Όλ§λ‚?)
   - Ξ©: λ¶ν™•μ‹¤μ„± ν–‰λ ¬ (μ–Όλ§λ‚ ν™•μ‹ ?)

3. **Posterior (ΞΌ_BL)**:
   - Formula: ΞΌ_BL = Ο€ + Ο„Ξ£P'[PΟ„Ξ£P' + Ξ©]^(-1)[Q - PΟ€]
   - Priorμ™€ Viewλ¥Ό Bayesian λ°©μ‹μΌλ΅ κ²°ν•©

4. **Idzorek λ°©λ²•**:
   - Confidence (0-100%) β†’ Ξ© λ³€ν™
   - PyPortfolioOptκ°€ μλ™ κ³„μ‚°
   - μ°λ¦¬λ” APIμ—μ„ confidenceλ§ μ κ³µ

---

## π”— κ΄€λ ¨ νμΌ

- `bl_agent/agent.py`: Agent μ •μ
- `bl_agent/prompt.py`: Agent ν”„λ΅¬ν”„νΈ
- `bl_mcp/server.py`: MCP μ„λ²„
- `bl_mcp/tools.py`: μµμ ν™” λ„κµ¬
- `start_http.py`: HTTP μ„λ²„ μ‹μ‘ μ¤ν¬λ¦½νΈ

---

**Happy Testing! π€**
